{"$defs":{"AudioSettings":{"additionalProperties":true,"description":"Audio track settings","properties":{"asset_id":{"description":"Identifier of the audio asset (UUID or simple ID, max 128 chars)","pattern":"^[A-Za-z0-9._:-]{1,128}$","type":"string"},"bpm":{"default":null,"description":"Override BPM (uses analyzed BPM if not set)","exclusiveMinimum":0,"maximum":300,"type":["number","null"]},"end_at_audio_end":{"default":true,"description":"End video when audio ends. Takes precedence over trim_end_ms when true; if false, trim_end_ms is used to determine the audio end point.","type":"boolean"},"start_offset_ms":{"default":0,"description":"Audio start offset in milliseconds","minimum":0,"type":"integer"},"trim_end_ms":{"default":0,"description":"Trim from end of audio in milliseconds. Only effective when end_at_audio_end is false.","minimum":0,"type":"integer"}},"required":["asset_id"],"type":"object"},"DefaultSettings":{"additionalProperties":true,"description":"Default settings applied to all segments unless overridden","properties":{"beats_per_cut":{"default":8,"description":"Default beats between cuts","maximum":64,"minimum":1,"type":"integer"},"effect":{"default":null,"description":"Default motion effect preset","oneOf":[{"$ref":"#/$defs/EffectPreset"},{"type":"null"}]},"transition":{"$ref":"#/$defs/Transition"}},"type":"object"},"DurationBeats":{"additionalProperties":false,"description":"Duration specified in musical beats","properties":{"count":{"description":"Number of beats (1-64)","maximum":64,"minimum":1,"type":"integer"},"mode":{"const":"beats","type":"string"}},"required":["mode","count"],"type":"object"},"DurationMs":{"additionalProperties":false,"description":"Duration specified in explicit milliseconds","properties":{"mode":{"const":"ms","type":"string"},"value":{"description":"Duration in milliseconds (250-60000)","maximum":60000,"minimum":250,"type":"integer"}},"required":["mode","value"],"type":"object"},"DurationNatural":{"additionalProperties":false,"description":"Natural duration based on asset type","properties":{"mode":{"const":"natural","type":"string"}},"required":["mode"],"type":"object"},"EffectPreset":{"description":"Motion effect preset","enum":["slow_zoom_in","slow_zoom_out","pan_left","pan_right","diagonal_push","subtle_drift","none"],"type":"string"},"OutputSettings":{"additionalProperties":true,"description":"Output video settings","properties":{"fps":{"default":30,"description":"Frames per second","maximum":120,"minimum":15,"type":"integer"},"height":{"default":1080,"description":"Output height in pixels","maximum":4320,"minimum":240,"type":"integer"},"width":{"default":1920,"description":"Output width in pixels","maximum":7680,"minimum":320,"type":"integer"}},"type":"object"},"RepeatSettings":{"additionalProperties":true,"description":"Settings for handling timeline shorter than audio","properties":{"fill_behavior":{"default":"black","description":"Fill behavior when mode=stop","enum":["black","freeze_last"],"type":"string"},"mode":{"default":"repeat_all","description":"How to handle repeating timeline","enum":["repeat_all","repeat_last","stop"],"type":"string"}},"type":"object"},"SourceTrim":{"additionalProperties":true,"description":"Video source trimming settings","properties":{"in_ms":{"default":0,"description":"Start time in source video (milliseconds)","minimum":0,"type":"integer"},"out_ms":{"default":null,"description":"End time in source video (milliseconds, null = end of video)","oneOf":[{"minimum":0,"type":"integer"},{"type":"null"}]}},"type":"object"},"TimelineSegment":{"additionalProperties":true,"allOf":[{"if":{"properties":{"type":{"const":"image"}},"required":["type"]},"then":{"properties":{"source":{"type":"null"}}}}],"description":"Individual segment in the timeline","properties":{"asset_id":{"description":"Identifier of the media asset (UUID or simple ID, max 128 chars)","pattern":"^[A-Za-z0-9._:-]{1,128}$","type":"string"},"duration":{"default":null,"description":"Segment duration. When null or omitted, uses defaults.beats_per_cut (in beats mode) to calculate duration.","oneOf":[{"$ref":"#/$defs/DurationBeats"},{"$ref":"#/$defs/DurationMs"},{"$ref":"#/$defs/DurationNatural"},{"type":"null"}]},"effect":{"default":null,"description":"Motion effect preset","oneOf":[{"$ref":"#/$defs/EffectPreset"},{"type":"null"}]},"source":{"default":null,"description":"Video source trim settings (video only)","oneOf":[{"$ref":"#/$defs/SourceTrim"},{"type":"null"}]},"transition_in":{"default":null,"description":"Transition at start of segment","oneOf":[{"$ref":"#/$defs/Transition"},{"type":"null"}]},"type":{"description":"Type of media asset","enum":["image","video"],"type":"string"}},"required":["asset_id","type"],"type":"object"},"Transition":{"additionalProperties":true,"allOf":[{"if":{"properties":{"type":{"const":"cut"}}},"then":{"properties":{"duration_ms":{"const":0}}}},{"if":{"properties":{"type":{"const":"crossfade"}}},"then":{"properties":{"duration_ms":{"minimum":50}}}}],"description":"Transition settings between segments. For 'cut' transitions, duration_ms must be 0. For 'crossfade' transitions, duration_ms must be >= 50ms.","properties":{"duration_ms":{"default":0,"description":"Transition duration in milliseconds (0-2000). Must be 0 for 'cut', >= 50 for 'crossfade'.","maximum":2000,"minimum":0,"type":"integer"},"type":{"default":"cut","description":"Transition type","enum":["cut","crossfade"],"type":"string"}},"type":"object"}},"$id":"edl-v1-schema","$schema":"http://json-schema.org/draft-07/schema#","additionalProperties":true,"description":"JSON Schema for EditRequest v1 - User-authored JSON schema for video editing","properties":{"audio":{"default":null,"oneOf":[{"$ref":"#/$defs/AudioSettings"},{"type":"null"}]},"defaults":{"$ref":"#/$defs/DefaultSettings"},"output":{"$ref":"#/$defs/OutputSettings"},"project_id":{"default":null,"description":"Optional project identifier (UUID or simple ID, max 128 chars)","oneOf":[{"pattern":"^[A-Za-z0-9._:-]{1,128}$","type":"string"},{"type":"null"}]},"repeat":{"$ref":"#/$defs/RepeatSettings"},"timeline":{"description":"List of timeline segments","items":{"$ref":"#/$defs/TimelineSegment"},"minItems":1,"type":"array"},"version":{"const":"1.0","default":"1.0","description":"Schema version","type":"string"}},"required":["version","timeline"],"title":"EDL v1 Schema","type":"object"}
